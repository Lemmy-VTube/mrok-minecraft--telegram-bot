services:
  minecraft-bot:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: minecraft-telegram-bot
    restart: unless-stopped
    env_file:
      - .env
    volumes:
      # Доступ к серверу Minecraft
      - /root/projects/mrok-minecraft-server:/server:ro
      # Директория для бэкапов
      - /root/projects/mrok-minecraft-server/backups:/app/backups
      # Логи бота
      - ./logs:/app/logs
      # Доступ к systemd для управления сервером (исправлено)
      - /var/run/dbus:/var/run/dbus:ro
      - /run/systemd:/run/systemd:ro
      # Доступ к журналам systemd
      - /var/log/journal:/var/log/journal:ro
    privileged: true
    network_mode: host
    logging:
      options:
        max-size: "10m"
        max-file: "3"